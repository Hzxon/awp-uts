<%- include('../partials/header', {title: 'Laporan Nilai'}) %>

<div class="flex h-screen bg-gray-100">
    <%- include('../partials/sidebar', {user: user, active: 'laporan-nilai'}) %>
    
    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <%- include('../partials/topbar', {user: user, pageTitle: 'Laporan Nilai'}) %>

        <main class="flex-1 p-6 overflow-y-auto">
             <div id="print-area" class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-lg font-semibold">Laporan Nilai Siswa</h2>
                    <div class="flex items-center space-x-2 w-full md:w-auto">
                        <form action="/laporan-nilai" method="GET" class="flex items-center space-x-2 w-full">
                            <input type="text" name="keyword" placeholder="Cari nama atau kelas..." value="<%= keyword %>" class="px-4 py-2 border rounded-lg text-sm w-full md:w-64">
                             <button type="submit" class="flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-600 rounded-lg hover:bg-gray-700">
                                <i data-lucide="search" class="w-4 h-4 mr-2"></i> Filter
                            </button>
                        </form>
                        <button onclick="window.print()" class="flex items-center px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 whitespace-nowrap">
                            <i data-lucide="printer" class="w-4 h-4 mr-2"></i> Cetak
                        </button>
                    </div>
                </div>
                <!-- Tabel Laporan -->
                 <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3">Nama Siswa</th>
                                <th scope="col" class="px-6 py-3">Kelas</th>
                                <th scope="col" class="px-6 py-3">Mata Pelajaran</th>
                                <th scope="col" class="px-6 py-3">Nilai</th>
                                <th scope="col" class="px-6 py-3">Keterangan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% students.forEach(student => { 
                                const nilai = Math.floor(Math.random() * 41) + 60; // Simulasi nilai 60-100
                            %>
                            <tr class="bg-white border-b">
                                <td class="px-6 py-4 font-medium text-gray-900"><%= student.name %></td>
                                <td class="px-6 py-4"><%= student.class %></td>
                                <td class="px-6 py-4">Matematika</td>
                                <td class="px-6 py-4"><%= nilai %></td>
                                <td class="px-6 py-4">
                                    <% if (nilai >= 75) { %>
                                        <span class="px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full">Lulus</span>
                                    <% } else { %>
                                        <span class="px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full">Remedial</span>
                                    <% } %>
                                </td>
                            </tr>
                            <% }) %>
                             <% if (students.length === 0) { %>
                                <tr>
                                    <td colspan="5" class="text-center py-10 text-gray-500">Data tidak ditemukan.</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
             </div>
        </main>
    </div>
</div>

<%- include('../partials/footer') %>
